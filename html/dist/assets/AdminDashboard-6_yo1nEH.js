import{d as b,a as d,o as C,i as F,e as t,w as e,f as v,t as p,b as o,u as D,F as j,j as P,p as S,l as k,_ as M,c as A,r as h,m as B,n as R,q as E,s as L,v as T,x as z,y as V,z as G,A as Q}from"./index-R4uZwxe8.js";async function y(n,s=0){try{const _=await fetch(`http://34.143.148.233:8443/api/switchMode?mode=${n}&speed=${s}`,{method:"GET",headers:{Accept:"application/json"},mode:"cors"});console.log("response",_);const c=await _.json();return console.log(c),c}catch(_){throw console.error("Error fetching data:",_),_}}const H=n=>(S("data-v-2a9251a7"),n=n(),k(),n),J=H(()=>o("h2",{class:"h2-light mb-5"},"ต้องการอัพเดทข้อมูลรายชื่อหรือไม่",-1)),K={class:"d-flex flex-column"},W=b({__name:"UpdateListModal",props:{title:String,description:String},setup(n){const s=n;return(_,c)=>{const a=d("v-btn"),r=d("v-card"),i=d("v-dialog");return C(),F(j,null,[t(a,{ripple:!1,variant:"text",color:"#FF8947",size:"large","prepend-icon":"mdi-sync"},{default:e(()=>[v(p(s.title),1)]),_:1}),t(i,{activator:"parent",persistent:"",width:"auto"},{default:e(({isActive:g})=>[t(r,{width:"345",height:"auto",class:"d-flex pa-9 card"},{default:e(()=>[J,o("div",K,[t(a,{class:"button-outlined",variant:"text",onClick:D(P)},{default:e(()=>[v(" ใช่ ")]),_:1},8,["onClick"]),t(a,{class:"button-contained",onClick:x=>g.value=!1,variant:"text"},{default:e(()=>[v(" ไม่ใช่ ")]),_:2},1032,["onClick"])])]),_:2},1024)]),_:1})],64)}}}),X=M(W,[["__scopeId","data-v-2a9251a7"]]),Y=o("p",{class:"button-light"},"ชื่อ-นามสกุล",-1),Z={class:"font-weight-regular text-md-h4 text-xs-h6"},tt=o("p",{class:"button-light"},"รหัสนักศึกษา",-1),et={class:"font-weight-regular text-md-h4 text-xs-h6"},ot=o("p",{class:"button-light"},"คณะ/วิทยาลัย",-1),st={class:"font-weight-regular text-md-h4 text-xs-h6"},nt=o("p",{class:"button-light"},"สาขาวิชา",-1),at={class:"font-weight-regular text-md-h4 text-xs-h6"},lt=b({__name:"CurrentStudentCard",props:{displayData:{}},setup(n){const s=n;return(_,c)=>{const a=d("v-col"),r=d("v-row"),i=d("v-card");return C(),A(i,{color:"#FFFFFF","max-width":"710","min-height":"390",class:"mb-5 px-9 py-12 border-radius-8"},{default:e(()=>[t(r,{class:"mb-auto flex-column flex-sm-row flex-wrap"},{default:e(()=>[t(a,{cols:"5",class:"align-self-sm-center"},{default:e(()=>[Y]),_:1}),t(a,null,{default:e(()=>[o("h1",Z,p(s.displayData.name),1)]),_:1})]),_:1}),t(r,{class:"mb-auto flex-column flex-sm-row flex-wrap"},{default:e(()=>[t(a,{cols:"5",class:"align-self-sm-center"},{default:e(()=>[tt]),_:1}),t(a,null,{default:e(()=>[o("h1",et,p(s.displayData.studentID),1)]),_:1})]),_:1}),t(r,{class:"mb-auto flex-column flex-sm-row flex-wrap"},{default:e(()=>[t(a,{cols:"5",class:"align-self-sm-center"},{default:e(()=>[ot]),_:1}),t(a,null,{default:e(()=>[o("h1",st,p(s.displayData.faculty),1)]),_:1})]),_:1}),t(r,{class:"mb-auto flex-column flex-sm-row flex-wrap"},{default:e(()=>[t(a,{cols:"5",class:"align-self-sm-center"},{default:e(()=>[nt]),_:1}),t(a,null,{default:e(()=>[o("h1",at,p(s.displayData.major),1)]),_:1})]),_:1})]),_:1})}}}),ct=n=>(S("data-v-d7af46f3"),n=n(),k(),n),dt=ct(()=>o("h2",{class:"h2-light mb-5"},"ต้องการรีเซ็ทรายชื่อหรือไม่",-1)),rt={class:"d-flex flex-column"},it=b({__name:"ResetListModal",props:{title:String,description:String,resetCounter:{type:Function}},setup(n){const s=n;return(_,c)=>{const a=d("v-btn"),r=d("v-card"),i=d("v-dialog");return C(),F(j,null,[t(a,{ripple:!1,variant:"text",color:"#FF8947",size:"large","prepend-icon":"mdi-sync"},{default:e(()=>[v(p(s.title),1)]),_:1}),t(i,{activator:"parent",persistent:"",width:"auto"},{default:e(({isActive:g})=>[t(r,{width:"345",height:"auto",class:"d-flex pa-9 card"},{default:e(()=>[dt,o("div",rt,[t(a,{class:"button-contained",variant:"text",onClick:c[0]||(c[0]=x=>s.resetCounter?s.resetCounter("morning"):"")},{default:e(()=>[v(" รอบเช้า ")]),_:1}),t(a,{class:"button-contained",variant:"text",onClick:c[1]||(c[1]=x=>s.resetCounter?s.resetCounter("afternoon"):"")},{default:e(()=>[v(" รอบบ่าย ")]),_:1}),t(a,{class:"button-outlined",onClick:x=>g.value=!1,variant:"text"},{default:e(()=>[v(" ยกเลิก ")]),_:2},1032,["onClick"])])]),_:2},1024)]),_:1})],64)}}}),ut=M(it,[["__scopeId","data-v-d7af46f3"]]),$=n=>(S("data-v-5a966ea8"),n=n(),k(),n),_t={class:"background d-flex flex-1-0"},ft=$(()=>o("h1",{class:"font-weight-regular text-md-h4 text-sm-h5 text-h6 mb-2"}," งานพิธีพระราชทานปริญญาบัตร สจล. ",-1)),pt=$(()=>o("p",{class:"font-weight-regular text-md-h6 text-sm"}," ณ หอประชุมเจ้าพระยาสุรวงษ์ไวยวัฒน์ (วร บุนาค) ",-1)),mt={class:"position-absolute mt-2",style:{right:"5%"}},ht={class:"d-flex flex-1-0 flex-md-column flex-sm-row ga-5 align-center"},vt={class:"text-center"},gt=$(()=>o("p",{class:"button-light"},"ลำดับปัจจุบัน",-1)),xt={class:"font-weight-regular text-md-h4 text-xs-h6"},wt={class:"flex-1-0"},bt={class:"text-center"},Ct=$(()=>o("p",{class:"button-light"},"ลำดับถัดไป",-1)),$t={class:"button-light"},yt={class:"text-center"},Dt={class:"h2-light"},Ft=b({__name:"AdminDashboard",setup(n){h(!1),h(!1),h(!1);const s=h({name:null,studentID:null,faculty:null,major:null,nextStudentName:null,currentOrderOfReading:null,nextStudentOrderOfReading:null,remaining:null,mode:null,speed:null});B(()=>{R().then(f=>{s.value=f,i.value=f.mode==="auto"?"auto-scrolling":null})});const _={protocol:"mqtts",username:"user1",password:"P@ssw0rd"},c=E.connect("tls://181314a4c00344d5a62cfc8c2059208e.s1.eu.hivemq.cloud:8884/mqtt",_);c.on("connect",function(){console.log("Connected")}),c.on("error",function(f){console.log(f)}),c.on("message",function(f,u){console.log("Received message:",f,u.toString());try{const l=L.parse(u.toString());console.log(l),s.value=l,i.value=l.mode==="auto"?"auto-scrolling":null}catch(l){console.error("Error parsing MQTT message:",l)}}),c.subscribe("dashboard"),T(()=>{c.end()});const a=h(!1),r=h(25),i=h(null),g=()=>{i.value==="auto-scrolling"?y("auto",r.value):y("sensor",r.value)},x=()=>{i.value==="auto-scrolling"&&y("auto",r.value)},U=f=>{V(f).then(()=>{R().then(u=>{s.value=u,i.value=u.mode==="auto"?"auto-scrolling":null})})};return(f,u)=>{const l=d("v-col"),m=d("v-row"),q=d("v-card-item"),I=d("v-card"),O=d("v-btn"),N=d("v-container");return C(),F("div",_t,[t(N,{class:"ml-8"},{default:e(()=>[t(m,{class:"mb-5 d-flex flex-1-0"},{default:e(()=>[t(l,{cols:"11"},{default:e(()=>[ft,pt]),_:1}),t(l,null,{default:e(()=>[o("div",mt,[t(z,{"is-admin":!0,"on-mode-change":g,"on-speed-change":x,mode:i.value,"onUpdate:mode":u[0]||(u[0]=w=>i.value=w),show:a.value,"onUpdate:show":u[1]||(u[1]=w=>a.value=w),personPerMinute:r.value,"onUpdate:personPerMinute":u[2]||(u[2]=w=>r.value=w)},null,8,["mode","show","personPerMinute"])])]),_:1})]),_:1}),t(m,{class:"ga-5"},{default:e(()=>[t(l,{class:"pa-0 align-self-center"},{default:e(()=>[o("div",ht,[t(I,{color:"#FF8947","min-width":"224","min-height":"115",class:"border-radius-8"},{default:e(()=>[t(q,null,{default:e(()=>[o("div",vt,[gt,o("h1",xt,p(s.value.currentOrderOfReading),1)])]),_:1})]),_:1}),o("div",wt,[t(O,{onClick:D(G),variant:"tonal",color:"#FF8947",icon:"mdi-chevron-down",class:"counter-down mb-5"},null,8,["onClick"]),t(O,{onClick:D(Q),variant:"tonal",color:"#FF8947",icon:"mdi-chevron-up",class:"counter-up mb-5"},null,8,["onClick"])])])]),_:1}),t(l,{class:"pa-0 justify-end",md:"8",sm:"11"},{default:e(()=>[t(m,null,{default:e(()=>[t(l,{cols:"12",md:"12"},{default:e(()=>[t(lt,{displayData:s.value},null,8,["displayData"])]),_:1})]),_:1})]),_:1})]),_:1}),t(m,null,{default:e(()=>[t(l,{md:"8",sm:"11","offset-md":"4",class:"pa-0"},{default:e(()=>[t(I,{color:"#D9D9D9","max-width":"710","min-height":"82",class:"mb-7 px-9 py-3"},{default:e(()=>[t(m,{"no-gutters":""},{default:e(()=>[t(l,{cols:"4"},{default:e(()=>[o("div",bt,[Ct,o("p",$t,p(s.value.nextStudentOrderOfReading),1)])]),_:1}),t(l,{cols:"8","align-self":"center"},{default:e(()=>[o("div",yt,[o("h2",Dt,p(s.value.nextStudentName),1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(m,{class:"flex-column flex-md-row"},{default:e(()=>[t(l,{class:"pa-0",md:"7","offset-md":"4"},{default:e(()=>[t(m,null,{default:e(()=>[t(l,null,{default:e(()=>[t(X,{title:"อัพเดทข้อมูลรายชื่อ"})]),_:1}),t(l,null,{default:e(()=>[t(ut,{title:"รีเซ็ทรายชื่อ","reset-counter":U})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}}),kt=M(Ft,[["__scopeId","data-v-5a966ea8"]]);export{kt as default};
